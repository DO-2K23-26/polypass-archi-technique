= Polypass Architecture
The polypass team
:toc:

== Breakdown

This part concerns the features we want to implement in the Polypass system.

include::src/drafts/lexicon.adoc[Lexicon]

=== User Management

As a user:

- I want to create an account.
- I want to log in to my account.
- I want to log out of my account.
- I want to delete my account.
- This account must be protected by a password.
- I want to be able to change my password.
- My account must be identified by an email address.
- I want to be able to change my email address if needed.


=== Credentials Management

As a user:

- I want to store the credentials of a website I am using.
- I want to tag my credentials for better organization.
- I want to generate a secure password.
- I want to add context or custom fields to my credentials.

ifdef::env-github[]
[source,mermaid]
endif::[]
ifndef::env-github[]
[mermaid]
endif::[]
....
flowchart TD
    User["User"] --> |Store| A["Website credentials"]
    User --> |Tag| B["Organize credentials"]
    User --> |Generate| C["Secure password"]
    User --> |Add| D["Context or custom fields"]
....

Here is a class diagram to better understand the relationship between the different entities: 

ifdef::env-github[]
[source,mermaid]
endif::[]
ifndef::env-github[]
[mermaid]
endif::[]
....
---
title: Polypass credentials data structure
---
classDiagram
     class Credential{
         +String Website
         +String Login
         +String Password
     }
     note for User "this model will not be detailled since its not the goal of this documentation"
     class User{
          +String Email
          +String Password
     }
     class Folder{
         +String Name
      }
      class Tag{
           +String Name
           +String color
      }
     Folder "1" --> "0..*" Folder : Contains
     User "1" --> "*" Credential
     Credential "*" --> "*" Tag
     Credential "1" --> "*" Folder
....

=== Credentials Sharing

As a user:

- I want to share my credentials with another user.
- I want to set the date of revocation of the shared credentials.
- I want to set the credential to be only seen once.
- I want to define a passphrase for the shared credentials.

As a guest:

- I want to be able to use the passphrase to see the shared credentials.
- I want to be able to copy/paste any field of the shared credentials.

ifdef::env-github[]
[source,mermaid]
endif::[]
ifndef::env-github[]
[mermaid]
endif::[]
.....
flowchart TD
    User["User"] --> |Share| A["Share credentials"]
    A --> |Set| B["Date of revocation"]
    A --> |Set| C["View-once credential"]
    A --> |Define| D["Passphrase"]
    Guest["Guest"] --> |Use| D
    Guest --> |Copy/Paste| E["Shared credentials fields"]
....

=== Encrypted Files

As a user:

- I want to take notes securely.
- I want to store files securely.

ifdef::env-github[]
[source,mermaid]
endif::[]
ifndef::env-github[]
[mermaid]
endif::[]
....
flowchart TD
    User["User"] --> |Take notes| A["Secure notes"]
    User --> |Store| B["Secure files"]
....

=== Organization

As a user:

- I want to organize my credentials using folders or tags.
- I want to create, rename, or delete folders or tags.
- I want to move credentials between folders or tags.
- I want to view my credentials in a tree structure based on folders or tags.

[mermaid, format="svg"]

ifdef::env-github[]
[source,mermaid]
endif::[]
ifndef::env-github[]
[mermaid]
endif::[]
....
flowchart TD
    User["User"] --> |Organize| A["Folders or tags"]
    A --> |Create/Rename/Delete| B["Manage folders or tags"]
    A --> |Move| C["Credentials between folders or tags"]
    A --> |View| D["Tree structure"]
....

=== Search

As a user:

- I want to search for a credential by its name.
- I want to search for a credential by its tag.
- I want to search for a credential by its website.

ifdef::env-github[]
[source,mermaid]
endif::[]
ifndef::env-github[]
[mermaid]
endif::[]
....
flowchart TD
    User["User"] --> |Search by| A["Credential name"]
    User --> |Search by| B["Credential tag"]
    User --> |Search by| C["Website"]
....

=== Insights

As a user:

- I want to see statistics about my passwords, such as:
    - Old passwords.
    - Reused passwords.
    - Weak passwords.
- I want to know if my credentials has been breached.
- I want to view credential usage statistics for a group, such as:
    - credential creation trends.
    - credential usage trends.


ifdef::env-github[]
[source,mermaid]
endif::[]
ifndef::env-github[]
[mermaid]
endif::[]
....
flowchart TD
    User["User"] --> |View| A["Credential statistics"]
    A --> |See| B["Old/Reused/Weak credentials"]
    A --> |Check| C["Breached logins or credentials"]
    A --> |View| D["Group usage statistics"]
    D --> |Analyze| E["Creation trends"]
    D --> |Analyze| F["Usage trends"]
....

=== Full use cases view

image::src/diagrams/use-case.drawio.png[Use cases, 100%, 100%]
